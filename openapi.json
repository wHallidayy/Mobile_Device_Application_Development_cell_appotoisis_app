{
    "openapi": "3.1.0",
    "info": {
        "title": "cell-analysis-backend",
        "description": "Backend API for cancer cell analysis application, apoptosis and viable cell",
        "contact": {
            "name": "Your Name",
            "email": "your.email@example.com"
        },
        "license": {
            "name": ""
        },
        "version": "0.1.0"
    },
    "paths": {
        "/api/v1/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login user",
                "description": "Authenticates a user and returns access and refresh tokens",
                "operationId": "login",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/LoginRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Login successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_LoginResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request data"
                    },
                    "401": {
                        "description": "Invalid credentials"
                    }
                }
            }
        },
        "/api/v1/auth/logout": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Logout user",
                "description": "Stateless logout - instructs client to discard tokens.\nThe server does not maintain session state, so the client is responsible\nfor removing the tokens from storage.",
                "operationId": "logout",
                "responses": {
                    "200": {
                        "description": "Logout successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_LogoutResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized - Invalid or missing token"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Register a new user",
                "description": "Creates a new user account with the provided credentials",
                "operationId": "register",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RegisterRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "User registered successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_RegisterResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request data"
                    },
                    "409": {
                        "description": "Username already exists"
                    }
                }
            }
        },
        "/api/v1/folders": {
            "get": {
                "tags": [
                    "Folder Management"
                ],
                "summary": "List all folders for the authenticated user",
                "operationId": "list_folders",
                "responses": {
                    "200": {
                        "description": "List of folders",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_FolderListResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Folder Management"
                ],
                "summary": "Create a new folder",
                "operationId": "create_folder",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateFolderRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Folder created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_FolderResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request"
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/folders/{folder_id}": {
            "delete": {
                "tags": [
                    "Folder Management"
                ],
                "summary": "Delete a folder and all its images (cascade delete)",
                "operationId": "delete_folder",
                "parameters": [
                    {
                        "name": "folder_id",
                        "in": "path",
                        "description": "Folder ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Folder deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_DeleteFolderResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Folder not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Folder Management"
                ],
                "summary": "Rename a folder",
                "operationId": "rename_folder",
                "parameters": [
                    {
                        "name": "folder_id",
                        "in": "path",
                        "description": "Folder ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateFolderRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Folder renamed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_FolderResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Folder not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/folders/{folder_id}/images": {
            "get": {
                "tags": [
                    "Image Management"
                ],
                "summary": "List images in a folder with pagination",
                "operationId": "list_images",
                "parameters": [
                    {
                        "name": "folder_id",
                        "in": "path",
                        "description": "Folder ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    },
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number (1-indexed, default: 1)",
                        "required": false,
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "format": "int32",
                            "default": 1,
                            "minimum": 1
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Items per page (default: 20, max: 100)",
                        "required": false,
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "format": "int32",
                            "default": 20,
                            "maximum": 100,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of images",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_ImageListResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Folder not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Image Management"
                ],
                "summary": "Upload a new image to a folder",
                "operationId": "upload_image",
                "parameters": [
                    {
                        "name": "folder_id",
                        "in": "path",
                        "description": "Folder ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "type": "array",
                                "items": {
                                    "type": "integer",
                                    "format": "int32",
                                    "minimum": 0
                                }
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Image uploaded",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_ImageResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid file"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Folder not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/folders/{folder_id}/images/confirm-upload": {
            "post": {
                "tags": [
                    "Image Management"
                ],
                "summary": "Confirm that upload to S3 is complete and register in database",
                "operationId": "confirm_upload",
                "parameters": [
                    {
                        "name": "folder_id",
                        "in": "path",
                        "description": "Folder ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ConfirmUploadRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Image registered",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_ImageResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request or file not found in storage"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Folder not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/folders/{folder_id}/images/request-upload": {
            "post": {
                "tags": [
                    "Image Management"
                ],
                "summary": "Request a presigned URL for direct S3 upload",
                "operationId": "request_upload",
                "parameters": [
                    {
                        "name": "folder_id",
                        "in": "path",
                        "description": "Folder ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RequestUploadRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Presigned upload URL generated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_RequestUploadResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid request"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Folder not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/health": {
            "get": {
                "tags": [
                    "Health"
                ],
                "operationId": "health_check",
                "responses": {
                    "200": {
                        "description": "Service is healthy"
                    }
                }
            }
        },
        "/api/v1/images/{image_id}": {
            "get": {
                "tags": [
                    "Image Management"
                ],
                "summary": "Get details of a specific image",
                "operationId": "get_image",
                "parameters": [
                    {
                        "name": "image_id",
                        "in": "path",
                        "description": "Image ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Image details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_ImageDetailResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Image not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            },
            "delete": {
                "tags": [
                    "Image Management"
                ],
                "summary": "Delete an image (soft delete)",
                "operationId": "delete_image",
                "parameters": [
                    {
                        "name": "image_id",
                        "in": "path",
                        "description": "Image ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Image deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_DeleteImageResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Image not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            },
            "patch": {
                "tags": [
                    "Image Management"
                ],
                "summary": "Rename an image",
                "operationId": "rename_image",
                "parameters": [
                    {
                        "name": "image_id",
                        "in": "path",
                        "description": "Image ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/RenameImageRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Image renamed",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_ImageResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid filename"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Image not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/images/{image_id}/analysis-history": {
            "get": {
                "tags": [
                    "AI Analysis"
                ],
                "summary": "Get analysis history for an image",
                "operationId": "get_analysis_history",
                "parameters": [
                    {
                        "name": "image_id",
                        "in": "path",
                        "description": "Image ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Analysis history",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_ImageAnalysisHistoryResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Image not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/images/{image_id}/analyze": {
            "post": {
                "tags": [
                    "AI Analysis"
                ],
                "summary": "Submit an image for AI analysis via RabbitMQ",
                "operationId": "analyze_image",
                "parameters": [
                    {
                        "name": "image_id",
                        "in": "path",
                        "description": "Image ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AnalyzeImageRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "202": {
                        "description": "Analysis job created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_AnalyzeImageResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Image not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/images/{image_id}/download-url": {
            "get": {
                "tags": [
                    "Image Management"
                ],
                "summary": "Get a presigned URL for direct S3 download",
                "operationId": "get_image_download_url",
                "parameters": [
                    {
                        "name": "image_id",
                        "in": "path",
                        "description": "Image ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Presigned download URL",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_PresignedDownloadResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Image not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/images/{image_id}/file": {
            "get": {
                "tags": [
                    "Image Management"
                ],
                "summary": "Get image file content from S3 storage",
                "operationId": "get_image_file",
                "parameters": [
                    {
                        "name": "image_id",
                        "in": "path",
                        "description": "Image ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Image file content",
                        "content": {
                            "image/*": {}
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Image not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/jobs/{job_id}": {
            "get": {
                "tags": [
                    "AI Analysis"
                ],
                "summary": "Get the status of an analysis job",
                "operationId": "get_job_status",
                "parameters": [
                    {
                        "name": "job_id",
                        "in": "path",
                        "description": "Job ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Job status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_JobStatusResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Job not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v1/jobs/{job_id}/result": {
            "get": {
                "tags": [
                    "AI Analysis"
                ],
                "summary": "Get the result of a completed analysis job",
                "operationId": "get_job_result",
                "parameters": [
                    {
                        "name": "job_id",
                        "in": "path",
                        "description": "Job ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Analysis result",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_AnalysisResultResponse"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Result not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        },
        "/api/v2/folders/{folder_id}/images": {
            "get": {
                "tags": [
                    "Image Management"
                ],
                "summary": "List images in a folder with cursor-based pagination (more efficient for large datasets)",
                "operationId": "list_images_v2",
                "parameters": [
                    {
                        "name": "folder_id",
                        "in": "path",
                        "description": "Folder ID",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    },
                    {
                        "name": "cursor",
                        "in": "query",
                        "description": "Cursor for pagination (RFC3339 timestamp of last seen item)\nIf not provided, returns from the beginning (most recent)",
                        "required": false,
                        "schema": {
                            "type": [
                                "string",
                                "null"
                            ]
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Items per page (default: 20, max: 100)",
                        "required": false,
                        "schema": {
                            "type": [
                                "integer",
                                "null"
                            ],
                            "format": "int32",
                            "default": 20,
                            "maximum": 100,
                            "minimum": 1
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of images with cursor pagination",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ApiResponse_ImageListResponseV2"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Folder not found"
                    }
                },
                "security": [
                    {
                        "bearer_auth": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "AnalysisHistoryItem": {
                "type": "object",
                "description": "Analysis history item for image detail",
                "required": [
                    "job_id",
                    "status"
                ],
                "properties": {
                    "ai_model_version": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "finished_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "job_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "status": {
                        "type": "string"
                    }
                }
            },
            "AnalysisHistorySummary": {
                "type": "object",
                "description": "Summary of a single analysis in history",
                "required": [
                    "job_id",
                    "status"
                ],
                "properties": {
                    "ai_model_version": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "avg_confidence_score": {
                        "type": [
                            "number",
                            "null"
                        ],
                        "format": "double"
                    },
                    "counts": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/CellCounts"
                            }
                        ]
                    },
                    "finished_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "job_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "status": {
                        "type": "string"
                    }
                }
            },
            "AnalysisResultResponse": {
                "type": "object",
                "description": "Analysis result response",
                "required": [
                    "result_id",
                    "job_id",
                    "image_id",
                    "counts",
                    "total_cells",
                    "avg_confidence_score",
                    "percentages",
                    "analyzed_at"
                ],
                "properties": {
                    "analyzed_at": {
                        "type": "string"
                    },
                    "avg_confidence_score": {
                        "type": "number",
                        "format": "double"
                    },
                    "counts": {
                        "$ref": "#/components/schemas/CellCounts"
                    },
                    "image_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "job_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "percentages": {
                        "$ref": "#/components/schemas/CellPercentages"
                    },
                    "raw_data": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/RawDetectionData"
                            }
                        ]
                    },
                    "result_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "summary_data": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "total_cells": {
                        "type": "integer",
                        "format": "int32"
                    }
                }
            },
            "AnalyzeImageRequest": {
                "type": "object",
                "description": "Request to analyze an image",
                "properties": {
                    "model_version": {
                        "type": "string",
                        "description": "AI model version to use (optional, defaults to latest)"
                    }
                }
            },
            "AnalyzeImageResponse": {
                "type": "object",
                "description": "Response when submitting image for analysis",
                "required": [
                    "job_id",
                    "image_id",
                    "status",
                    "ai_model_version",
                    "status_url",
                    "created_at"
                ],
                "properties": {
                    "ai_model_version": {
                        "type": "string"
                    },
                    "created_at": {
                        "type": "string"
                    },
                    "image_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "job_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "status": {
                        "type": "string"
                    },
                    "status_url": {
                        "type": "string"
                    }
                }
            },
            "ApiError": {
                "type": "object",
                "description": "API error structure",
                "required": [
                    "code",
                    "message"
                ],
                "properties": {
                    "code": {
                        "type": "string"
                    },
                    "message": {
                        "type": "string"
                    }
                }
            },
            "ApiResponse_AnalysisResultResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Analysis result response",
                        "required": [
                            "result_id",
                            "job_id",
                            "image_id",
                            "counts",
                            "total_cells",
                            "avg_confidence_score",
                            "percentages",
                            "analyzed_at"
                        ],
                        "properties": {
                            "analyzed_at": {
                                "type": "string"
                            },
                            "avg_confidence_score": {
                                "type": "number",
                                "format": "double"
                            },
                            "counts": {
                                "$ref": "#/components/schemas/CellCounts"
                            },
                            "image_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "job_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "percentages": {
                                "$ref": "#/components/schemas/CellPercentages"
                            },
                            "raw_data": {
                                "oneOf": [
                                    {
                                        "type": "null"
                                    },
                                    {
                                        "$ref": "#/components/schemas/RawDetectionData"
                                    }
                                ]
                            },
                            "result_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "summary_data": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            },
                            "total_cells": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_AnalyzeImageResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Response when submitting image for analysis",
                        "required": [
                            "job_id",
                            "image_id",
                            "status",
                            "ai_model_version",
                            "status_url",
                            "created_at"
                        ],
                        "properties": {
                            "ai_model_version": {
                                "type": "string"
                            },
                            "created_at": {
                                "type": "string"
                            },
                            "image_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "job_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "status": {
                                "type": "string"
                            },
                            "status_url": {
                                "type": "string"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_DeleteFolderResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Delete folder response",
                        "required": [
                            "message",
                            "deleted_images_count"
                        ],
                        "properties": {
                            "deleted_images_count": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "message": {
                                "type": "string"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_DeleteImageResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Delete image response",
                        "required": [
                            "message"
                        ],
                        "properties": {
                            "message": {
                                "type": "string"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_FolderListResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "List folders response",
                        "required": [
                            "folders",
                            "total"
                        ],
                        "properties": {
                            "folders": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/FolderResponse"
                                }
                            },
                            "total": {
                                "type": "integer",
                                "format": "int64"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_FolderResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Single folder response",
                        "required": [
                            "folder_id",
                            "folder_name",
                            "image_count",
                            "created_at"
                        ],
                        "properties": {
                            "created_at": {
                                "type": "string"
                            },
                            "deleted_at": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            },
                            "folder_id": {
                                "type": "integer",
                                "format": "int32"
                            },
                            "folder_name": {
                                "type": "string"
                            },
                            "image_count": {
                                "type": "integer",
                                "format": "int64"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_ImageAnalysisHistoryResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Analysis history response for an image",
                        "required": [
                            "image_id",
                            "analyses",
                            "total"
                        ],
                        "properties": {
                            "analyses": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/AnalysisHistorySummary"
                                }
                            },
                            "image_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "total": {
                                "type": "integer",
                                "format": "int64"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_ImageDetailResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Image detail response (with analysis history)",
                        "required": [
                            "image_id",
                            "folder_id",
                            "original_filename",
                            "file_url",
                            "file_size",
                            "mime_type",
                            "analysis_history",
                            "uploaded_at"
                        ],
                        "properties": {
                            "analysis_history": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/AnalysisHistoryItem"
                                }
                            },
                            "file_size": {
                                "type": "integer",
                                "format": "int32"
                            },
                            "file_url": {
                                "type": "string"
                            },
                            "folder_id": {
                                "type": "integer",
                                "format": "int32"
                            },
                            "image_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "metadata": {
                                "oneOf": [
                                    {
                                        "type": "null"
                                    },
                                    {
                                        "$ref": "#/components/schemas/ImageMetadataResponse"
                                    }
                                ]
                            },
                            "mime_type": {
                                "type": "string"
                            },
                            "original_filename": {
                                "type": "string"
                            },
                            "uploaded_at": {
                                "type": "string"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_ImageListResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "List images response with pagination",
                        "required": [
                            "images",
                            "pagination"
                        ],
                        "properties": {
                            "images": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/ImageResponse"
                                }
                            },
                            "pagination": {
                                "$ref": "#/components/schemas/PaginationInfo"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_ImageListResponseV2": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "List images response with cursor-based pagination",
                        "required": [
                            "images",
                            "pagination"
                        ],
                        "properties": {
                            "images": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/ImageResponse"
                                }
                            },
                            "pagination": {
                                "$ref": "#/components/schemas/CursorPaginationInfo"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_ImageResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Single image response",
                        "required": [
                            "image_id",
                            "folder_id",
                            "original_filename",
                            "file_size",
                            "mime_type",
                            "has_analysis",
                            "uploaded_at"
                        ],
                        "properties": {
                            "file_size": {
                                "type": "integer",
                                "format": "int32"
                            },
                            "folder_id": {
                                "type": "integer",
                                "format": "int32"
                            },
                            "has_analysis": {
                                "type": "boolean"
                            },
                            "image_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "metadata": {
                                "oneOf": [
                                    {
                                        "type": "null"
                                    },
                                    {
                                        "$ref": "#/components/schemas/ImageMetadataResponse"
                                    }
                                ]
                            },
                            "mime_type": {
                                "type": "string"
                            },
                            "original_filename": {
                                "type": "string"
                            },
                            "uploaded_at": {
                                "type": "string"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_JobStatusResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Job status response",
                        "required": [
                            "job_id",
                            "image_id",
                            "status"
                        ],
                        "properties": {
                            "ai_model_version": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            },
                            "error_message": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            },
                            "finished_at": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            },
                            "image_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "job_id": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "result_url": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            },
                            "started_at": {
                                "type": [
                                    "string",
                                    "null"
                                ]
                            },
                            "status": {
                                "type": "string"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_LoginResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Login response DTO",
                        "required": [
                            "access_token",
                            "refresh_token",
                            "expires_in",
                            "user"
                        ],
                        "properties": {
                            "access_token": {
                                "type": "string"
                            },
                            "expires_in": {
                                "type": "integer",
                                "format": "int64"
                            },
                            "refresh_token": {
                                "type": "string"
                            },
                            "user": {
                                "$ref": "#/components/schemas/UserResponse"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_LogoutResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Logout response DTO",
                        "required": [
                            "message"
                        ],
                        "properties": {
                            "message": {
                                "type": "string"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_PresignedDownloadResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Response with presigned download URL",
                        "required": [
                            "url",
                            "expires_at"
                        ],
                        "properties": {
                            "expires_at": {
                                "type": "string",
                                "description": "URL expiration time (RFC3339)"
                            },
                            "url": {
                                "type": "string",
                                "description": "Presigned URL for GET download"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_RegisterResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Register response DTO",
                        "required": [
                            "user_id",
                            "username",
                            "created_at"
                        ],
                        "properties": {
                            "created_at": {
                                "type": "string"
                            },
                            "user_id": {
                                "type": "string",
                                "format": "uuid"
                            },
                            "username": {
                                "type": "string"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "ApiResponse_RequestUploadResponse": {
                "type": "object",
                "description": "Standard API response wrapper",
                "required": [
                    "success"
                ],
                "properties": {
                    "data": {
                        "type": "object",
                        "description": "Response with presigned upload URL",
                        "required": [
                            "upload_token",
                            "presigned_url",
                            "expires_at"
                        ],
                        "properties": {
                            "expires_at": {
                                "type": "string",
                                "description": "URL expiration time (RFC3339)"
                            },
                            "presigned_url": {
                                "type": "string",
                                "description": "Presigned URL for PUT upload"
                            },
                            "upload_token": {
                                "type": "string",
                                "description": "Token to use when confirming upload (contains S3 key)"
                            }
                        }
                    },
                    "error": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ApiError"
                            }
                        ]
                    },
                    "success": {
                        "type": "boolean"
                    }
                }
            },
            "BoundingBox": {
                "type": "object",
                "description": "Bounding box for detected cell",
                "required": [
                    "class",
                    "confidence",
                    "x",
                    "y",
                    "width",
                    "height"
                ],
                "properties": {
                    "class": {
                        "type": "string"
                    },
                    "confidence": {
                        "type": "number",
                        "format": "double"
                    },
                    "height": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "width": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "x": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "y": {
                        "type": "integer",
                        "format": "int32"
                    }
                }
            },
            "CellCounts": {
                "type": "object",
                "description": "Cell counts in analysis result",
                "required": [
                    "viable",
                    "apoptosis",
                    "other"
                ],
                "properties": {
                    "apoptosis": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "other": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "viable": {
                        "type": "integer",
                        "format": "int32"
                    }
                }
            },
            "CellPercentages": {
                "type": "object",
                "description": "Cell percentages in analysis result",
                "required": [
                    "viable",
                    "apoptosis",
                    "other"
                ],
                "properties": {
                    "apoptosis": {
                        "type": "number",
                        "format": "double"
                    },
                    "other": {
                        "type": "number",
                        "format": "double"
                    },
                    "viable": {
                        "type": "number",
                        "format": "double"
                    }
                }
            },
            "ConfirmUploadRequest": {
                "type": "object",
                "description": "Confirm that upload to S3 is complete",
                "required": [
                    "upload_token",
                    "filename",
                    "content_type",
                    "file_size"
                ],
                "properties": {
                    "content_type": {
                        "type": "string",
                        "description": "MIME type",
                        "example": "image/jpeg"
                    },
                    "file_size": {
                        "type": "integer",
                        "format": "int64",
                        "description": "File size in bytes",
                        "example": 1024000
                    },
                    "filename": {
                        "type": "string",
                        "description": "Original filename",
                        "example": "photo.jpg"
                    },
                    "upload_token": {
                        "type": "string",
                        "description": "Token received from request-upload endpoint"
                    }
                }
            },
            "CreateFolderRequest": {
                "type": "object",
                "description": "Create folder request",
                "required": [
                    "folder_name"
                ],
                "properties": {
                    "folder_name": {
                        "type": "string"
                    }
                }
            },
            "CursorPaginationInfo": {
                "type": "object",
                "description": "Cursor-based pagination information (efficient for large datasets)",
                "required": [
                    "has_next",
                    "count"
                ],
                "properties": {
                    "count": {
                        "type": "integer",
                        "format": "int32",
                        "description": "Number of items in this response"
                    },
                    "has_next": {
                        "type": "boolean",
                        "description": "Whether there are more items after this page"
                    },
                    "next_cursor": {
                        "type": [
                            "string",
                            "null"
                        ],
                        "description": "Cursor to use for the next page (RFC3339 timestamp)\nNone if no more items"
                    }
                }
            },
            "DeleteFolderResponse": {
                "type": "object",
                "description": "Delete folder response",
                "required": [
                    "message",
                    "deleted_images_count"
                ],
                "properties": {
                    "deleted_images_count": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "message": {
                        "type": "string"
                    }
                }
            },
            "DeleteImageResponse": {
                "type": "object",
                "description": "Delete image response",
                "required": [
                    "message"
                ],
                "properties": {
                    "message": {
                        "type": "string"
                    }
                }
            },
            "FolderListResponse": {
                "type": "object",
                "description": "List folders response",
                "required": [
                    "folders",
                    "total"
                ],
                "properties": {
                    "folders": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/FolderResponse"
                        }
                    },
                    "total": {
                        "type": "integer",
                        "format": "int64"
                    }
                }
            },
            "FolderResponse": {
                "type": "object",
                "description": "Single folder response",
                "required": [
                    "folder_id",
                    "folder_name",
                    "image_count",
                    "created_at"
                ],
                "properties": {
                    "created_at": {
                        "type": "string"
                    },
                    "deleted_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "folder_id": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "folder_name": {
                        "type": "string"
                    },
                    "image_count": {
                        "type": "integer",
                        "format": "int64"
                    }
                }
            },
            "ImageAnalysisHistoryResponse": {
                "type": "object",
                "description": "Analysis history response for an image",
                "required": [
                    "image_id",
                    "analyses",
                    "total"
                ],
                "properties": {
                    "analyses": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AnalysisHistorySummary"
                        }
                    },
                    "image_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "total": {
                        "type": "integer",
                        "format": "int64"
                    }
                }
            },
            "ImageDetailResponse": {
                "type": "object",
                "description": "Image detail response (with analysis history)",
                "required": [
                    "image_id",
                    "folder_id",
                    "original_filename",
                    "file_url",
                    "file_size",
                    "mime_type",
                    "analysis_history",
                    "uploaded_at"
                ],
                "properties": {
                    "analysis_history": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AnalysisHistoryItem"
                        }
                    },
                    "file_size": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "file_url": {
                        "type": "string"
                    },
                    "folder_id": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "image_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "metadata": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ImageMetadataResponse"
                            }
                        ]
                    },
                    "mime_type": {
                        "type": "string"
                    },
                    "original_filename": {
                        "type": "string"
                    },
                    "uploaded_at": {
                        "type": "string"
                    }
                }
            },
            "ImageListResponse": {
                "type": "object",
                "description": "List images response with pagination",
                "required": [
                    "images",
                    "pagination"
                ],
                "properties": {
                    "images": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ImageResponse"
                        }
                    },
                    "pagination": {
                        "$ref": "#/components/schemas/PaginationInfo"
                    }
                }
            },
            "ImageListResponseV2": {
                "type": "object",
                "description": "List images response with cursor-based pagination",
                "required": [
                    "images",
                    "pagination"
                ],
                "properties": {
                    "images": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ImageResponse"
                        }
                    },
                    "pagination": {
                        "$ref": "#/components/schemas/CursorPaginationInfo"
                    }
                }
            },
            "ImageMetadataResponse": {
                "type": "object",
                "description": "Image metadata",
                "properties": {
                    "height": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "format": "int32",
                        "minimum": 0
                    },
                    "width": {
                        "type": [
                            "integer",
                            "null"
                        ],
                        "format": "int32",
                        "minimum": 0
                    }
                }
            },
            "ImageResponse": {
                "type": "object",
                "description": "Single image response",
                "required": [
                    "image_id",
                    "folder_id",
                    "original_filename",
                    "file_size",
                    "mime_type",
                    "has_analysis",
                    "uploaded_at"
                ],
                "properties": {
                    "file_size": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "folder_id": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "has_analysis": {
                        "type": "boolean"
                    },
                    "image_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "metadata": {
                        "oneOf": [
                            {
                                "type": "null"
                            },
                            {
                                "$ref": "#/components/schemas/ImageMetadataResponse"
                            }
                        ]
                    },
                    "mime_type": {
                        "type": "string"
                    },
                    "original_filename": {
                        "type": "string"
                    },
                    "uploaded_at": {
                        "type": "string"
                    }
                }
            },
            "JobStatusResponse": {
                "type": "object",
                "description": "Job status response",
                "required": [
                    "job_id",
                    "image_id",
                    "status"
                ],
                "properties": {
                    "ai_model_version": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "error_message": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "finished_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "image_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "job_id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "result_url": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "started_at": {
                        "type": [
                            "string",
                            "null"
                        ]
                    },
                    "status": {
                        "type": "string"
                    }
                }
            },
            "LoginRequest": {
                "type": "object",
                "description": "Login request DTO",
                "required": [
                    "username",
                    "password"
                ],
                "properties": {
                    "password": {
                        "type": "string"
                    },
                    "username": {
                        "type": "string"
                    }
                }
            },
            "LoginResponse": {
                "type": "object",
                "description": "Login response DTO",
                "required": [
                    "access_token",
                    "refresh_token",
                    "expires_in",
                    "user"
                ],
                "properties": {
                    "access_token": {
                        "type": "string"
                    },
                    "expires_in": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "refresh_token": {
                        "type": "string"
                    },
                    "user": {
                        "$ref": "#/components/schemas/UserResponse"
                    }
                }
            },
            "LogoutResponse": {
                "type": "object",
                "description": "Logout response DTO",
                "required": [
                    "message"
                ],
                "properties": {
                    "message": {
                        "type": "string"
                    }
                }
            },
            "PaginationInfo": {
                "type": "object",
                "description": "Pagination information",
                "required": [
                    "page",
                    "limit",
                    "total",
                    "total_pages"
                ],
                "properties": {
                    "limit": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "page": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "total": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "total_pages": {
                        "type": "integer",
                        "format": "int32"
                    }
                }
            },
            "PresignedDownloadResponse": {
                "type": "object",
                "description": "Response with presigned download URL",
                "required": [
                    "url",
                    "expires_at"
                ],
                "properties": {
                    "expires_at": {
                        "type": "string",
                        "description": "URL expiration time (RFC3339)"
                    },
                    "url": {
                        "type": "string",
                        "description": "Presigned URL for GET download"
                    }
                }
            },
            "RawDetectionData": {
                "type": "object",
                "description": "Raw detection data",
                "required": [
                    "bounding_boxes"
                ],
                "properties": {
                    "bounding_boxes": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/BoundingBox"
                        }
                    }
                }
            },
            "RegisterRequest": {
                "type": "object",
                "description": "Register request DTO",
                "required": [
                    "username",
                    "password"
                ],
                "properties": {
                    "password": {
                        "type": "string"
                    },
                    "username": {
                        "type": "string"
                    }
                }
            },
            "RegisterResponse": {
                "type": "object",
                "description": "Register response DTO",
                "required": [
                    "user_id",
                    "username",
                    "created_at"
                ],
                "properties": {
                    "created_at": {
                        "type": "string"
                    },
                    "user_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "username": {
                        "type": "string"
                    }
                }
            },
            "RenameImageRequest": {
                "type": "object",
                "description": "Rename image request",
                "required": [
                    "new_filename"
                ],
                "properties": {
                    "new_filename": {
                        "type": "string",
                        "example": "new_image_name.jpg"
                    }
                }
            },
            "RequestUploadRequest": {
                "type": "object",
                "description": "Request presigned URL for direct S3 upload",
                "required": [
                    "filename",
                    "content_type",
                    "file_size"
                ],
                "properties": {
                    "content_type": {
                        "type": "string",
                        "description": "MIME type of the file",
                        "example": "image/jpeg"
                    },
                    "file_size": {
                        "type": "integer",
                        "format": "int64",
                        "description": "File size in bytes",
                        "example": 1024000
                    },
                    "filename": {
                        "type": "string",
                        "description": "Original filename",
                        "example": "photo.jpg"
                    }
                }
            },
            "RequestUploadResponse": {
                "type": "object",
                "description": "Response with presigned upload URL",
                "required": [
                    "upload_token",
                    "presigned_url",
                    "expires_at"
                ],
                "properties": {
                    "expires_at": {
                        "type": "string",
                        "description": "URL expiration time (RFC3339)"
                    },
                    "presigned_url": {
                        "type": "string",
                        "description": "Presigned URL for PUT upload"
                    },
                    "upload_token": {
                        "type": "string",
                        "description": "Token to use when confirming upload (contains S3 key)"
                    }
                }
            },
            "UpdateFolderRequest": {
                "type": "object",
                "description": "Update folder request (rename)",
                "required": [
                    "folder_name"
                ],
                "properties": {
                    "folder_name": {
                        "type": "string"
                    }
                }
            },
            "UserResponse": {
                "type": "object",
                "description": "User info for responses (without password hash)",
                "required": [
                    "user_id",
                    "username"
                ],
                "properties": {
                    "user_id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "username": {
                        "type": "string"
                    }
                }
            }
        },
        "securitySchemes": {
            "bearer_auth": {
                "type": "http",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Health",
            "description": "Health check endpoints"
        },
        {
            "name": "Authentication",
            "description": "User authentication endpoints"
        },
        {
            "name": "Folder Management",
            "description": "Folder CRUD operations"
        },
        {
            "name": "Image Management",
            "description": "Image upload, listing, and deletion"
        },
        {
            "name": "AI Analysis",
            "description": "AI-powered cell analysis endpoints"
        }
    ]
}